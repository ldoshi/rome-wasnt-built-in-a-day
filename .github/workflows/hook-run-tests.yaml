name: Run pytest CI for PRs and merges
on: [pull_request, push]
jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["3.9.6"]
    steps:
      name: Checkout main repository
      uses: actions/checkout@v3
        with:
          path: rome
      name: Checkout and build gym-bridges
      uses: actions/checkout@v3
        with:
          repository: ldoshi/gym-bridges
          path: gym-bridges
      run: |
        cd gym-briges/
        ./reinstall
      name: Set up Python ${{ matrix.python-version}}
      uses: actions/setup-python@v2
        with:
          python-version: ${{ matrix.python-version }}
      name: Install dependencies
      run: pip install -r ./rome/dev_requirements.txt
      name: Test with pytest
      run: |
        cd rome/
        pip install .
        pytest .
